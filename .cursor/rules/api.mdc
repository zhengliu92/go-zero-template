---
alwaysApply: true
---

# API 规则

## 自动生成文件

**禁止直接编辑**带有 `// Code generated by goctl. DO NOT EDIT.` 的文件。

修改流程：
1. 编辑 `api/*.api` 文件
2. 运行 `make gen`
3. 在生成的 Logic 文件中写业务代码

## @doc 注解（必需）

每个 handler 必须有 `@doc`：

```go
@doc (
    summary: "创建定时任务"
    description: "创建新任务，需要管理员权限"
)
@handler CreateCronTaskHandler
post /cron-tasks (CreateCronTaskRequest) returns (CreateCronTaskResponse)
```

- **summary**: 5-15 字，动词开头
- **description**: 详细说明、权限要求

## 字段注释（必需）

```go
type CronTask {
    ID        int64  `json:"id"`          // 任务ID
    Name      string `json:"name"`        // 任务名称
    Status    string `json:"status"`      // 状态: enabled-启用, disabled-禁用
    CreatedAt string `json:"created_at"`  // 创建时间（ISO8601）
}
```

- 枚举字段列出所有可能值
- 有格式要求的字段说明格式

## 检查清单

- [ ] handler 有 `@doc`（summary + description）
- [ ] 所有字段有注释
- [ ] 枚举字段列出可能值
- [ ] 运行 `make gen` 生成代码
